<div class="cup">

    <!-- <div class="underline flex">

        <div>
            <div class="flex">
                <div class="sitePicMargin">
                    <img class="sitePicTiny" ng-src="assets/img/site_{{siteIndex%3}}.jpg">
                </div>
                <div>
                    <h2 class="center">{{site.name}}</h2>
                </div>
            </div>
        </div>
        <div class="right">
            <div class="flex flex-even">
                <div class="">
                    <p class="light"> Spatial Compliance</p>
                    <h2> <i style="color: rgb(0, 255, 21);">&#9650;</i>50%</h2>
                </div>
                <div class="">
                    <p class="light"> Volumetric Compliance</p>
                    <h2> <i style="color: red;">&#9660;</i>50%</h2>
                </div>
            </div>
        </div>
    </div> -->



    <!-- ------------------------------------------------------------------------------------- -->

    <div class="siteContentGrid">

        <!-- <h2 class="center underline"><i class="fas fa-chart-bar"></i> Metrics</h2>
            </br> -->


        <div class="siteContentSummary" ng-if="summary != undefined">
            <h2 class="underline"><i class="fas fa-chart-bar"></i> Summary</h2>
            <div ng-repeat="x in summary" class="flex overline">
                <h3 class="light">{{x[0]}}</h3>
                <h1 class="right">{{x[1] | number : 0}}</h1>
            </div>
            <br />
            <h2 class="underline"><i class="fas fa-weight-hanging"></i> Materials</h2>
            <div ng-repeat="x in summaryMaterials">
                <br />
                <div class="flex underline">
                    <h4 class="light">{{x[0]}}</h4>
                    <h2 class="right">{{x[1] | number : 0}}</h2>
                </div>
            </div>
        </div>


        <div class="siteContentSummary" ng-if="summary == undefined">

            <div class="flex flex-start">
                <div class="sitePicMargin">
                    <img class="sitePicSmall" ng-src="assets/img/site_{{siteIndex%3}}.jpg">
                </div>
                <div class="flex flex-column">
                    <h2 class="center">{{site.name}}</h2>
                </div>
            </div>

            <div class="">
                <div class="flex">
                    <div>
                        <h4 class="light"><i class="fas fa-weight-hanging"></i></i> Total Production Tonnes</h4>
                        <div class="flex flex-start">
                            <!-- <h5 class="light right"><i class="fas fa-chart-line"></i> Average</h5> -->
                            <h3 class="left">{{(shiftData.productionTonnes.average | number : 0)||0}}/hr</h3>
                        </div>
                    </div>
                    <h1 class="right"> {{(shiftData.productionTonnes.total| number:0) || 0}}</h1>
                </div>
            </div>
            <div class="">
                <div class="flex">
                    <div>
                        <h4 class="light"><i class="fas fa-weight-hanging"></i></i> Total Production Metres</h4>
                        <div class="flex flex-start">
                            <!-- <h5 class="light right"><i class="fas fa-chart-line"></i> Average</h5> -->
                            <h3 class="right">{{(shiftData.productionMetres.average | number : 0)||0}}/hr</h3>
                        </div>
                    </div>
                    <h1 class="right"> {{(shiftData.productionMetres.total| number:0)||0}}</h1>

                </div>
            </div>

            </br>
            <h2 class="underline"><i class="fas fa-chart-bar"></i> Metrics</h2>
            </br>
            <div ng-repeat="(key, value) in shiftData.metricData" class="center flex overline" ng-if="value.total != 0"
                ng-class="{'prodMetricBG' : value.activity.includes('Production')}">
                <div class="left">
                    <h4> {{value.name}}</h4>
                    <p class="light">{{value.activity}}</p>
                </div>
                <h2>{{value.total | number:0}}</h2>
            </div>
        </div>




        <!-- Bar Chart -->
        <drill-down-chart name="Production Tonnes" chart="siteTPH"></drill-down-chart>



        <!-- Sankey  -->
        <drill-down-chart name="Material Movements" chart="sankey"></drill-down-chart>





        <!-- Timeline -->
        <div class="chartCard">
            <div class="charthead">
                <div class="chartheadtxt left">
                    <h5>Asset Timeline</h5>
                </div>
            </div>
            <div class="chartdivcontent {{$root.backGroundClassBlur}} siteDivMargin">
                <div ng-repeat="(key, value) in site.equipmentByFunction" class="">
                    <div class="overline">
                        <h5>{{ functionMapping[key] }}</h5>
                    </div>
                    <div ng-repeat="y in value" ng-init="e = getEquipmentLastEvent(equipment[y])" id="">
                        <div class="equipFlatUsageSite">
                            <h5 class="left"><a ng-href="#!equip/{{y}}"><i ng-class='equipStyleIcon[e.majorGroup]'
                                        ng-style='equipStyleColor[e.majorGroup]'></i> {{equipment[y].id}}</a></h5>
                            <!-- This class just helps the JS find all of class for the charts -->
                            <div class="equip-flat-usage" id="{{equipment[y].id}}">
                                <chart-loading></chart-loading>
                            </div>
                        </div>
                    </div>
                    <br />
                </div>
            </div>
        </div>









        <!-- ------------------------------------------------------------------------------------- -->





        <div class="chartCard">
            <div class="charthead">
                <div class="chartheadtxt left">
                    <h5>TUM Metrics</h5>
                </div>
            </div>
            <div class="chartdivcontent {{$root.backGroundClassBlur}} siteDivMargin">

                <div ng-repeat="(key, value) in site.equipmentByFunction" class="overline">
                    <div>
                        <h5 class="">{{ functionMapping[key] }}</h5>
                    </div>
                    <div class="flex" style="height: 60px;">
                        <div class="gauge h100pc w100pc" id="{{key}}_gA">AAA</div>
                        <div class="gauge h100pc w100pc" id="{{key}}_gUofA">AAA</div>
                        <div class="gauge h100pc w100pc" id="{{key}}_gE">AAA</div>
                        <div class="gauge h100pc w100pc" id="{{key}}_gAU">AAA</div>
                    </div>
                    <br />
                </div>
            </div>
        </div>


    </div>
</div>